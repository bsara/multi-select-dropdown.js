/*!
 * MultiSelectDropdown.js (0.0.1)
 *
 * Copyright (c) 2016 Brandon Sara (http://bsara.github.io)
 * Licensed under the CPOL-1.02 (https://github.com/bsara/multi-select-dropdown.js/blob/master/LICENSE.md)
 */
!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.MultiSelectDropdown=t()}(this,function(){function e(){function t(e,t,n){n=n||this;var i=f[e];null==i&&(i=f[e]={});var o=r.getHashCode(t),l=i[o];null==l&&(l=i[o]={handler:t,contexts:[]}),~l.contexts.indexOf(n)||l.contexts.push(n)}function n(e,t,n){if(e in f){var i=f[e];if(null==t)return void delete f[e];var o=r.getHashCode(t),l=i[t];if(null==n)return void delete i[o];var a=l.contexts.indexOf(n);~a&&l.contexts.splice(a,1),0===l.contexts.length&&delete i[o],0===Object.keys(i).length&&delete f[e]}}function i(){var e=Array.prototype.push.apply(this,arguments);return p("add",d.call(this,arguments)),p("update",d.call(this,arguments)),e}function o(){var e=Array.prototype.pop.apply(this,arguments);return p("remove",d.call(this,e)),p("update",d.call(this,e)),e}function l(){var e=Array.prototype.reverse.apply(this,arguments);return p("sort",d.call(this)),p("update",d.call(this)),e}function a(){var e=this[0],t=Array.prototype.shift.apply(this,arguments);return p("remove",d.call(this,e)),p("update",d.call(this,e)),t}function s(){var e=Array.prototype.sort.apply(this,arguments);return p("sort",d.call(this,e)),p("update",d.call(this,e)),e}function c(){var e=Array.prototype.splice.apply(this,arguments);return p("remove",d.call(this,e)),p("update",d.call(this,e)),e}function u(){var e=Array.prototype.unshift.apply(this,arguments);return p("remove",d.call(this,arguments)),p("update",d.call(this,arguments)),e}function d(e){var t=[this];return null==e?t:t.concat(Array.from(e))}function p(e,t){setTimeout(function(){if(f.hasOwnProperty(e))for(var n=f[e],r=Object.keys(n),i=0;i<r.length;i++)for(var o=n[r[i]],l=0;l<o.contexts.length;l++)o.handler.apply(o.contexts[l],t)},0)}var h=arguments;if(!(this instanceof e))return new e.apply(this,h);var f;(function(){if(Array.call(this),null!=h)if(1===h.length){var e=Array.from(h[0]);this.push.apply(this,e.length>0?e:h[0])}else this.push.apply(this,Array.from(h));f={},this.addEventListener=t,this.removeEventListener=n,this.push=i,this.pop=o,this.reverse=l,this.shift=a,this.sort=s,this.splice=c,this.unshift=u}).bind(this)()}function t(n){function r(e,t){var n=document.createElement("option");null!=t&&""!==t&&(n.value=String(t)),n.text=String(e),v.appendChild(n),S.push(n)}function i(e){var t=s(e),n=v.querySelector(t);return null!=n?(n.parentNode.removeChild(n),null==v.querySelector(t)):!0}function o(){S.splice(0,S.length)}function l(){}function a(e){e.addEventListener("click",h.bind(e))}function s(e){return null==e?"option:not([value])":'option[value="'+String(e)+'"]'}function c(){return v.querySelectorAll("option:not(.msd-select-all)[checked]").length}function u(){E&&c()===S.length&&m.setAttribute("checked","checked")}function d(){if(E&&null!=m.getAttribute("checked"))return void(y.innerText="All "+b+" Selected");var e=k?0:c();return 0===e?void(y.innerText=g):void(y.innerText=e+" "+(1===e?A:b)+" Selected")}function p(e){e.forEach(function(e){var t=e.parentNode;t.removeChild(e),t.appendChild(e)})}function h(e){e.preventDefault(),e.stopPropagation();var t=null==this.getAttribute("checked");e.target===m&&(k=!t),null==this.getAttribute("checked")?this.setAttribute("checked","checked"):this.removeAttribute("checked"),e.target!==m&&u(),d()}function f(){return null==m.getAttribute("checked")?void this.removeAttribute("checked"):void this.setAttribute("checked","checked")}if(!(this instanceof t))return new t(n);var v,m,y,g,A,b,S,E=!1,k=!1;(function(){n=n||{},v="string"==typeof n?document.querySelector(n):n instanceof HTMLElement?n:n.element||document.querySelector(n.selector),A=v.dataset.optionTypeLabelSingular||v.dataset.optionTypeLabel||"Option",b=v.dataset.optionTypeLabelPlural||A+"s",g=v.dataset.placeholder||"0 "+b+" Selected",S=new e(v.querySelectorAll("option")),n.useSelectAll===!0&&(E=!0,m=document.createElement("option"),m.innerText="All",m.classList.add("msd-select-all"),m.addEventListener("click",f.bind(m)),u(),v.insertBefore(m,v.firstChild)),y=document.createElement("option"),y.selected=!0,y.classList.add("msd-placeholder"),d(),v.insertBefore(y,v.firstChild);for(var t=0;t<S.length;t++){var s=S[t];a(s)}y.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),v.blur()}),v.addEventListener("change",function(e){e.preventDefault(),e.stopPropagation();for(var t=0;t<v.selectedOptions.length;t++)v.selectedOptions[t].selected=!1;v.value=void 0}),v.addEventListener("focus",function(e){e.preventDefault(),e.stopPropagation(),v.setAttribute("multiple","multiple"),y.selected=!1}),v.addEventListener("blur",function(e){y.selected=!0,v.removeAttribute("multiple")}),S.addEventListener("update",p),this.addOption=r,this.removeOption=i,this.clearOptions=o,this.destroy=l}).bind(this)()}function n(){function e(e){if(e instanceof HTMLElement)return o(e);for(var t=[],n=e instanceof Array?e.splice():document.querySelectorAll(e instanceof String?e:"select.msd"),r=0;r<n.length;r++)t.push(o(n[r]));return t}function i(e){}function o(e){var n=r.getElementSelector(e);Object.hasOwnProperty(l,n)||(l[n]=[]);var i=new t({element:e});return l[n].push(i),i}if(!(this instanceof n))return new n;var l;(function(){l={},this.init=e,this.reload=i}).bind(this)()}var r={getElementSelector:function(e){if(null==e||!(e instanceof HTMLElement))throw new TypeError("$el cannot be `null` or `undefined` and must be an instance of `HTMLElement`!");var t=e.tagName;return null!=e.id&&(t+="#"+e.id),null!=e.className&&(t+="."+e.className),t},getHashCode:function(e){var t,n=0;if(e=String(e),0===e.length)return n;for(var r=0;r<e.length;r++)t=e.charCodeAt(r),n=(n<<5)-n+t,n|=0;return n}};return Object.freeze(r),e.prototype=Object.create(Array.prototype),e.prototype.constructor=e,{MultiSelectDropdownManager:n,MultiSelectDropdownElement:t}});
//# sourceMappingURL=multi-select-dropdown.min.js.map
