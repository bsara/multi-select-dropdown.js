/*!
 * MultiSelectDropdown.js (0.0.1)
 *
 * Copyright (c) 2016 Brandon Sara (http://bsara.github.io)
 * Licensed under the CPOL-1.02 (https://github.com/bsara/multi-select-dropdown.js/blob/master/LICENSE.md)
 */
!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.MultiSelectDropdown=t()}(this,function(){function e(){function t(e,t,n){n=n||this;var r=f[e];null==r&&(r=f[e]={});var i=r[t];null==i&&(i=r[t]=[]);var o=i.indexOf(n);~o||i.push(n)}function n(e,t,n){if(e in f){var r=f[e];if(null==t)return void delete f[e];var i=r[t];if(null==n)return void delete r[t];var o=i.indexOf(n);~o&&i.splice(o,1),0===i.length&&delete r[t],0===Object.keys(r).length&&delete f[e]}}function r(){var e=Array.prototype.push.apply(this,arguments);return p("add",s(arguments)),p("update",s(arguments)),e}function i(){var e=Array.prototype.pop.apply(this,arguments);return p("remove",s(e)),p("update",s(e)),e}function o(){var e=Array.prototype.reverse.apply(this,arguments);return p("sort",s()),p("update",s()),e}function a(){var e=this[0],t=Array.prototype.shift.apply(this,arguments);return p("remove",s(e)),p("update",s(e)),t}function l(){var e=Array.prototype.sort.apply(this,arguments);return p("sort",s(e)),p("update",s(e)),e}function u(){var e=Array.prototype.splice.apply(this,arguments);return p("remove",s(e)),p("update",s(e)),e}function c(){var e=Array.prototype.unshift.apply(this,arguments);return p("remove",s(arguments)),p("update",s(arguments)),e}function s(e){var t=[this];return null==e?t:t.concat(Array.from(e))}function p(e,t){setTimeout(function(){if(f.hasOwnProperty(e)){var n=f[e];for(var r in Object.keys(n))for(var i=n[r],o=0;o<i.length;o++)r.apply(i[o],t)}},0)}var d=arguments;if(!(this instanceof e))return new e.apply(this,d);var f;(function(){Array.apply(this,d),f={},this.attachEvent=t,this.detachEvent=n,this.push=r,this.pop=i,this.reverse=o,this.shift=a,this.sort=l,this.splice=u,this.unshift=c}).bind(this)()}function t(n){function r(e,t){var n=document.createElement("option");null!=t&&(n.value=String(t)),n.text=String(e),A.push(n)}function i(e){var t=l(e),n=h.querySelector(t);return null!=n?(n.parentNode.removeChild(n),null==h.querySelector(t)):!0}function o(){A.splice(0,A.length)}function a(){}function l(e){return null==e?"option:not([value])":'option[value="'+String(e)+'"]'}function u(){return h.querySelectorAll("option:not(.msd-select-all)[checked]").length}function c(){E&&u()===A.length&&v.setAttribute("checked","checked")}function s(){if(E&&null!=v.getAttribute("checked"))return void(m.innerText="All "+b+" Selected");var e=S?0:u();return 0===e?void(m.innerText=y):void(m.innerText=e+" "+(1===e?g:b)+" Selected")}function p(e){e.forEach(function(e){var t=e.parentNode;t.removeChild(e),t.appendChild(e)})}function d(e){e.preventDefault(),e.stopPropagation();var t=null==this.getAttribute("checked");e.target===v&&(S=!t),null==this.getAttribute("checked")?this.setAttribute("checked","checked"):this.removeAttribute("checked"),e.target!==v&&c(),s()}function f(){return null==v.getAttribute("checked")?void this.removeAttribute("checked"):void this.setAttribute("checked","checked")}if(!(this instanceof t))return new t(n);var h,v,m,y,g,b,A,E=!1,S=!1;(function(){n=n||{},h=n.element||document.querySelector(n.selector),g=h.dataset.optionTypeLabelSingular||h.dataset.optionTypeLabel||"Option",b=h.dataset.optionTypeLabelPlural||g+"s",y=h.dataset.placeholder||"0 "+b+" Selected",A=new e(h.querySelectorAll("option")),n.useSelectAll===!0&&(E=!0,v=document.createElement("option"),v.innerText="All",v.classList.add("msd-select-all"),v.addEventListener("click",d.bind(v)),c(),h.insertBefore(v,h.firstChild)),m=document.createElement("option"),m.selected=!0,m.classList.add("msd-placeholder"),s(),h.insertBefore(m,h.firstChild);for(var t=0;t<A.length;t++){var l=A[t];l.addEventListener("click",d.bind(l)),v.addEventListener("click",f.bind(l))}m.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),h.blur()}),h.addEventListener("change",function(e){e.preventDefault(),e.stopPropagation();for(var t=0;t<h.selectedOptions.length;t++)h.selectedOptions[t].selected=!1;h.value=void 0}),h.addEventListener("focus",function(e){e.preventDefault(),e.stopPropagation(),h.setAttribute("multiple","multiple"),m.selected=!1}),h.addEventListener("blur",function(e){m.selected=!0,h.removeAttribute("multiple")}),A.attachEvent("update",p),this.addOption=r,this.removeOption=i,this.clearOptions=o,this.destroy=a}).bind(this)()}function n(){function e(e){if(e instanceof HTMLElement)return o(e);for(var t=[],n=e instanceof Array?e.splice():document.querySelectorAll(e instanceof String?e:"select.msd"),r=0;r<n.length;r++)t.push(o(n[r]));return t}function i(e){}function o(e){var n=r.getElementSelector(e);Object.hasOwnProperty(a,n)||(a[n]=[]);var i=new t({element:e});return a[n].push(i),i}if(!(this instanceof n))return new n;var a;(function(){a={},this.init=e,this.reload=i}).bind(this)()}var r={getElementSelector:function(e){if(null==e||!(e instanceof HTMLElement))throw new TypeError("$el cannot be `null` or `undefined` and must be an instance of `HTMLElement`!");var t=e.tagName;return null!=e.id&&(t+="#"+e.id),null!=e.className&&(t+="."+e.className),t}};return Object.freeze(r),e.prototype=Object.create(Array.prototype),e.prototype.constructor=e,{MultiSelectDropdownManager:n,MultiSelectDropdownElement:t}});
//# sourceMappingURL=multi-select-dropdown.min.js.map
