/*!
 * MultiSelectDropdown.js (0.0.1)
 *
 * Copyright (c) 2016 Brandon Sara (http://bsara.github.io)
 * Licensed under the CPOL-1.02 (https://github.com/bsara/multi-select-dropdown.js/blob/master/LICENSE.md)
 */
!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.MultiSelectDropdownElement=t()}(this,function(){function e(){function t(e,t,r){r=r||this;var i=f[e];null==i&&(i=f[e]={});var o=n.getHashCode(t),l=i[o];null==l&&(l=i[o]={handler:t,contexts:[]}),~l.contexts.indexOf(r)||l.contexts.push(r)}function r(e,t,r){if(e in f){var i=f[e];if(null==t)return void delete f[e];var o=n.getHashCode(t),l=i[t];if(null==r)return void delete i[o];var a=l.contexts.indexOf(r);~a&&l.contexts.splice(a,1),0===l.contexts.length&&delete i[o],0===Object.keys(i).length&&delete f[e]}}function i(){var e=Array.prototype.push.apply(this,arguments);return d("add",p.call(this,arguments)),d("update",p.call(this,arguments)),e}function o(){var e=Array.prototype.pop.apply(this,arguments);return d("remove",p.call(this,e)),d("update",p.call(this,e)),e}function l(){var e=Array.prototype.reverse.apply(this,arguments);return d("sort",p.call(this)),d("update",p.call(this)),e}function a(){var e=this[0],t=Array.prototype.shift.apply(this,arguments);return d("remove",p.call(this,e)),d("update",p.call(this,e)),t}function s(){var e=Array.prototype.sort.apply(this,arguments);return d("sort",p.call(this,e)),d("update",p.call(this,e)),e}function c(){var e=Array.prototype.splice.apply(this,arguments);return d("remove",p.call(this,e)),d("update",p.call(this,e)),e}function u(){var e=Array.prototype.unshift.apply(this,arguments);return d("remove",p.call(this,arguments)),d("update",p.call(this,arguments)),e}function p(e){var t=[this];return null==e?t:t.concat(Array.from(e))}function d(e,t){setTimeout(function(){if(f.hasOwnProperty(e))for(var n=f[e],r=Object.keys(n),i=0;i<r.length;i++)for(var o=n[r[i]],l=0;l<o.contexts.length;l++)o.handler.apply(o.contexts[l],t)},0)}var h=arguments;if(!(this instanceof e))return new e.apply(this,h);var f;(function(){if(Array.call(this),null!=h)if(1===h.length){var e=Array.from(h[0]);this.push.apply(this,e.length>0?e:h[0])}else this.push.apply(this,Array.from(h));f={},this.addEventListener=t,this.removeEventListener=r,this.push=i,this.pop=o,this.reverse=l,this.shift=a,this.sort=s,this.splice=c,this.unshift=u}).bind(this)()}function t(n){function r(e,t){var n=document.createElement("option");null!=t&&""!==t&&(n.value=String(t)),n.text=String(e),m.appendChild(n),x.push(n),a(n)}function i(e){var t=c(e),n=m.querySelector(t);return null!=n?(s(n),n.parentNode.removeChild(n),null==m.querySelector(t)):!0}function o(){x.splice(0,x.length),x.forEach(s)}function l(){}function a(e){var t=f.bind(e);e.addEventListener("click",t),k.optionElements.push(e),k.eventHandlers.push(t)}function s(e){var t=k.eventHandlers[k.optionElements.indexOf(e)];e.removeEventListener("click",t)}function c(e){return null==e?"option:not([value])":'option[value="'+String(e)+'"]'}function u(){return m.querySelectorAll("option:not(.msd-select-all)[checked]").length}function p(){L&&u()===x.length&&y.setAttribute("checked","checked")}function d(){if(L&&null!=y.getAttribute("checked"))return void(g.innerText="All "+E+" Selected");var e=S?0:u();return 0===e?void(g.innerText=A):void(g.innerText=e+" "+(1===e?b:E)+" Selected")}function h(e){e.forEach(function(e){var t=e.parentNode;t.removeChild(e),t.appendChild(e)})}function f(e){e.preventDefault(),e.stopPropagation();var t=null==this.getAttribute("checked");e.target===y&&(S=!t),null==this.getAttribute("checked")?this.setAttribute("checked","checked"):this.removeAttribute("checked"),e.target!==y&&p(),d()}function v(){return null==y.getAttribute("checked")?void this.removeAttribute("checked"):void this.setAttribute("checked","checked")}if(!(this instanceof t))return new t(n);var m,y,g,A,b,E,k,x,L=!1,S=!1;(function(){n=n||{},m="string"==typeof n?document.querySelector(n):n instanceof HTMLElement?n:n.element||document.querySelector(n.selector),b=m.dataset.optionTypeLabelSingular||m.dataset.optionTypeLabel||"Option",E=m.dataset.optionTypeLabelPlural||b+"s",A=m.dataset.placeholder||"0 "+E+" Selected",k={optionElements:[],eventHandlers:[]},x=new e(m.querySelectorAll("option")),n.useSelectAll===!0&&(L=!0,y=document.createElement("option"),y.innerText="All",y.classList.add("msd-select-all"),y.addEventListener("click",v.bind(y)),p(),m.insertBefore(y,m.firstChild)),g=document.createElement("option"),g.selected=!0,g.classList.add("msd-placeholder"),d(),m.insertBefore(g,m.firstChild);for(var t=0;t<x.length;t++){var s=x[t];a(s)}g.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),m.blur()}),m.addEventListener("change",function(e){e.preventDefault(),e.stopPropagation();for(var t=0;t<m.selectedOptions.length;t++)m.selectedOptions[t].selected=!1;m.value=void 0}),m.addEventListener("focus",function(e){e.preventDefault(),e.stopPropagation(),m.setAttribute("multiple","multiple"),g.selected=!1}),m.addEventListener("blur",function(e){g.selected=!0,m.removeAttribute("multiple")}),x.addEventListener("update",h),this.addOption=r,this.removeOption=i,this.clearOptions=o,this.destroy=l}).bind(this)()}var n={getElementSelector:function(e){if(null==e||!(e instanceof HTMLElement))throw new TypeError("$el cannot be `null` or `undefined` and must be an instance of `HTMLElement`!");var t=e.tagName;return null!=e.id&&(t+="#"+e.id),null!=e.className&&(t+="."+e.className),t},getHashCode:function(e){var t,n=0;if(e=String(e),0===e.length)return n;for(var r=0;r<e.length;r++)t=e.charCodeAt(r),n=(n<<5)-n+t,n|=0;return n}};return Object.freeze(n),e.prototype=Object.create(Array.prototype),e.prototype.constructor=e,t});
//# sourceMappingURL=multi-select-dropdown-element.min.js.map
