/*!
 * MultiSelectDropdown.js (0.0.1)
 *
 * Copyright (c) 2016 Brandon Sara (http://bsara.github.io)
 * Licensed under the CPOL-1.02 (https://github.com/bsara/multi-select-dropdown.js/blob/master/LICENSE.md)
 */
!function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?module.exports=e():t.MultiSelectDropdownElement=e()}(this,function(){function t(){function e(t,e,n){n=n||this;var r=h[t];null==r&&(r=h[t]={});var i=MSDInternalUtils.getHashCode(e),o=r[i];null==o&&(o=r[i]={handler:e,contexts:[]}),~o.contexts.indexOf(n)||o.contexts.push(n)}function n(t,e,n){if(t in h){var r=h[t];if(null==e)return void delete h[t];var i=MSDInternalUtils.getHashCode(e),o=r[e];if(null==n)return void delete r[i];var l=o.contexts.indexOf(n);~l&&o.contexts.splice(l,1),0===o.contexts.length&&delete r[i],0===Object.keys(r).length&&delete h[t]}}function r(){var t=Array.prototype.push.apply(this,arguments);return p("add",u.call(this,arguments)),p("update",u.call(this,arguments)),t}function i(){var t=Array.prototype.pop.apply(this,arguments);return p("remove",u.call(this,t)),p("update",u.call(this,t)),t}function o(){var t=Array.prototype.reverse.apply(this,arguments);return p("sort",u.call(this)),p("update",u.call(this)),t}function l(){var t=this[0],e=Array.prototype.shift.apply(this,arguments);return p("remove",u.call(this,t)),p("update",u.call(this,t)),e}function s(){var t=Array.prototype.sort.apply(this,arguments);return p("sort",u.call(this,t)),p("update",u.call(this,t)),t}function a(){var t=Array.prototype.splice.apply(this,arguments);return p("remove",u.call(this,t)),p("update",u.call(this,t)),t}function c(){var t=Array.prototype.unshift.apply(this,arguments);return p("remove",u.call(this,arguments)),p("update",u.call(this,arguments)),t}function u(t){var e=[this];return null==t?e:e.concat(Array.from(t))}function p(t,e){setTimeout(function(){if(h.hasOwnProperty(t))for(var n=h[t],r=Object.keys(n),i=0;i<r.length;i++)for(var o=n[r[i]],l=0;l<o.contexts.length;l++)o.handler.apply(o.contexts[l],e)},0)}var d=arguments;if(!(this instanceof t))return new t.apply(this,d);var h;(function(){if(Array.call(this),null!=d)if(1===d.length){var t=Array.from(d[0]);this.push.apply(this,t.length>0?t:d[0])}else this.push.apply(this,Array.from(d));h={},this.addEventListener=e,this.removeEventListener=n,this.push=r,this.pop=i,this.reverse=o,this.shift=l,this.sort=s,this.splice=a,this.unshift=c}).bind(this)()}function e(n){function r(t,e){var n=document.createElement("option");null!=e&&""!==e&&(n.value=String(e)),n.text=String(t),v.appendChild(n),k.push(n)}function i(t){var e=a(t),n=v.querySelector(e);return null!=n?(n.parentNode.removeChild(n),null==v.querySelector(e)):!0}function o(){k.splice(0,k.length)}function l(){}function s(t){t.addEventListener("click",h.bind(t))}function a(t){return null==t?"option:not([value])":'option[value="'+String(t)+'"]'}function c(){return v.querySelectorAll("option:not(.msd-select-all)[checked]").length}function u(){x&&c()===k.length&&y.setAttribute("checked","checked")}function p(){if(x&&null!=y.getAttribute("checked"))return void(m.innerText="All "+b+" Selected");var t=S?0:c();return 0===t?void(m.innerText=g):void(m.innerText=t+" "+(1===t?A:b)+" Selected")}function d(t){t.forEach(function(t){var e=t.parentNode;e.removeChild(t),e.appendChild(t)})}function h(t){t.preventDefault(),t.stopPropagation();var e=null==this.getAttribute("checked");t.target===y&&(S=!e),null==this.getAttribute("checked")?this.setAttribute("checked","checked"):this.removeAttribute("checked"),t.target!==y&&u(),p()}function f(){return null==y.getAttribute("checked")?void this.removeAttribute("checked"):void this.setAttribute("checked","checked")}if(!(this instanceof e))return new e(n);var v,y,m,g,A,b,k,x=!1,S=!1;(function(){n=n||{},v="string"==typeof n?document.querySelector(n):n instanceof HTMLElement?n:n.element||document.querySelector(n.selector),A=v.dataset.optionTypeLabelSingular||v.dataset.optionTypeLabel||"Option",b=v.dataset.optionTypeLabelPlural||A+"s",g=v.dataset.placeholder||"0 "+b+" Selected",k=new t(v.querySelectorAll("option")),n.useSelectAll===!0&&(x=!0,y=document.createElement("option"),y.innerText="All",y.classList.add("msd-select-all"),y.addEventListener("click",f.bind(y)),u(),v.insertBefore(y,v.firstChild)),m=document.createElement("option"),m.selected=!0,m.classList.add("msd-placeholder"),p(),v.insertBefore(m,v.firstChild);for(var e=0;e<k.length;e++){var a=k[e];s(a)}m.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),v.blur()}),v.addEventListener("change",function(t){t.preventDefault(),t.stopPropagation();for(var e=0;e<v.selectedOptions.length;e++)v.selectedOptions[e].selected=!1;v.value=void 0}),v.addEventListener("focus",function(t){t.preventDefault(),t.stopPropagation(),v.setAttribute("multiple","multiple"),m.selected=!1}),v.addEventListener("blur",function(t){m.selected=!0,v.removeAttribute("multiple")}),k.addEventListener("update",d),this.addOption=r,this.removeOption=i,this.clearOptions=o,this.destroy=l}).bind(this)()}return t.prototype=Object.create(Array.prototype),t.prototype.constructor=t,e});
//# sourceMappingURL=multi-select-dropdown-element.min.js.map
