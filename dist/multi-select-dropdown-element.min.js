/*!
 * MultiSelectDropdown.js (0.0.1)
 *
 * Copyright (c) 2016 Brandon Sara (http://bsara.github.io)
 * Licensed under the CPOL-1.02 (https://github.com/bsara/multi-select-dropdown.js/blob/master/LICENSE.md)
 */
!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.MultiSelectDropdownElement=t()}(this,function(){function e(){function t(e,t,n){n=n||this;var r=h[e];null==r&&(r=h[e]={});var i=r[t];null==i&&(i=r[t]=[]);var o=i.indexOf(n);~o||i.push(n)}function n(e,t,n){if(e in h){var r=h[e];if(null==t)return void delete h[e];var i=r[t];if(null==n)return void delete r[t];var o=i.indexOf(n);~o&&i.splice(o,1),0===i.length&&delete r[t],0===Object.keys(r).length&&delete h[e]}}function r(){var e=Array.prototype.push.apply(this,arguments);return p("add",c(arguments)),p("update",c(arguments)),e}function i(){var e=Array.prototype.pop.apply(this,arguments);return p("remove",c(e)),p("update",c(e)),e}function o(){var e=Array.prototype.reverse.apply(this,arguments);return p("sort",c()),p("update",c()),e}function a(){var e=this[0],t=Array.prototype.shift.apply(this,arguments);return p("remove",c(e)),p("update",c(e)),t}function u(){var e=Array.prototype.sort.apply(this,arguments);return p("sort",c(e)),p("update",c(e)),e}function l(){var e=Array.prototype.splice.apply(this,arguments);return p("remove",c(e)),p("update",c(e)),e}function s(){var e=Array.prototype.unshift.apply(this,arguments);return p("remove",c(arguments)),p("update",c(arguments)),e}function c(e){var t=[this];return null==e?t:t.concat(Array.from(e))}function p(e,t){setTimeout(function(){if(h.hasOwnProperty(e)){var n=h[e];for(var r in Object.keys(n))for(var i=n[r],o=0;o<i.length;o++)r.apply(i[o],t)}},0)}var d=arguments;if(!(this instanceof e))return new e.apply(this,d);var h;(function(){Array.apply(this,d),h={},this.attachEvent=t,this.detachEvent=n,this.push=r,this.pop=i,this.reverse=o,this.shift=a,this.sort=u,this.splice=l,this.unshift=s}).bind(this)()}function t(n){function r(e,t){var n=document.createElement("option");null!=t&&(n.value=String(t)),n.text=String(e),b.push(n)}function i(e){var t=u(e),n=f.querySelector(t);return null!=n?(n.parentNode.removeChild(n),null==f.querySelector(t)):!0}function o(){b.splice(0,b.length)}function a(){}function u(e){return null==e?"option:not([value])":'option[value="'+String(e)+'"]'}function l(){return f.querySelectorAll("option:not(.msd-select-all)[checked]").length}function s(){k&&l()===b.length&&v.setAttribute("checked","checked")}function c(){if(k&&null!=v.getAttribute("checked"))return void(y.innerText="All "+A+" Selected");var e=E?0:l();return 0===e?void(y.innerText=m):void(y.innerText=e+" "+(1===e?g:A)+" Selected")}function p(e){e.forEach(function(e){var t=e.parentNode;t.removeChild(e),t.appendChild(e)})}function d(e){e.preventDefault(),e.stopPropagation();var t=null==this.getAttribute("checked");e.target===v&&(E=!t),null==this.getAttribute("checked")?this.setAttribute("checked","checked"):this.removeAttribute("checked"),e.target!==v&&s(),c()}function h(){return null==v.getAttribute("checked")?void this.removeAttribute("checked"):void this.setAttribute("checked","checked")}if(!(this instanceof t))return new t(n);var f,v,y,m,g,A,b,k=!1,E=!1;(function(){n=n||{},f=n.element||document.querySelector(n.selector),g=f.dataset.optionTypeLabelSingular||f.dataset.optionTypeLabel||"Option",A=f.dataset.optionTypeLabelPlural||g+"s",m=f.dataset.placeholder||"0 "+A+" Selected",b=new e(f.querySelectorAll("option")),n.useSelectAll===!0&&(k=!0,v=document.createElement("option"),v.innerText="All",v.classList.add("msd-select-all"),v.addEventListener("click",d.bind(v)),s(),f.insertBefore(v,f.firstChild)),y=document.createElement("option"),y.selected=!0,y.classList.add("msd-placeholder"),c(),f.insertBefore(y,f.firstChild);for(var t=0;t<b.length;t++){var u=b[t];u.addEventListener("click",d.bind(u)),v.addEventListener("click",h.bind(u))}y.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),f.blur()}),f.addEventListener("change",function(e){e.preventDefault(),e.stopPropagation();for(var t=0;t<f.selectedOptions.length;t++)f.selectedOptions[t].selected=!1;f.value=void 0}),f.addEventListener("focus",function(e){e.preventDefault(),e.stopPropagation(),f.setAttribute("multiple","multiple"),y.selected=!1}),f.addEventListener("blur",function(e){y.selected=!0,f.removeAttribute("multiple")}),b.attachEvent("update",p),this.addOption=r,this.removeOption=i,this.clearOptions=o,this.destroy=a}).bind(this)()}return e.prototype=Object.create(Array.prototype),e.prototype.constructor=e,t});
//# sourceMappingURL=multi-select-dropdown-element.min.js.map
